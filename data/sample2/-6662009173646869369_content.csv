"Content"
"    /***&#xD;&#xA;     Copyright (c) 2008-2016 CommonsWare, LLC&#xD;&#xA;     Licensed under the Apache License, Version 2.0 (the """"License""""); you may not&#xD;&#xA;     use this file except in compliance with the License. You may obtain a copy&#xD;&#xA;     of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required&#xD;&#xA;     by applicable law or agreed to in writing, software distributed under the&#xD;&#xA;     License is distributed on an """"AS IS"""" BASIS, WITHOUT WARRANTIES OR CONDITIONS&#xD;&#xA;     OF ANY KIND, either express or implied. See the License for the specific&#xD;&#xA;     language governing permissions and limitations under the License.&#xD;&#xA;    &#xD;&#xA;     From _The Busy Coder's Guide to Android Development_&#xD;&#xA;     https://commonsware.com/Android&#xD;&#xA;     */&#xD;&#xA;    &#xD;&#xA;    package com.commonsware.android.camcon;&#xD;&#xA;    &#xD;&#xA;    import android.app.Activity;&#xD;&#xA;    import android.content.Intent;&#xD;&#xA;    import android.net.Uri;&#xD;&#xA;    import android.os.Bundle;&#xD;&#xA;    import android.os.Environment;&#xD;&#xA;    import android.provider.MediaStore;&#xD;&#xA;    import java.io.File;&#xD;&#xA;    &#xD;&#xA;    public class CameraContentDemoActivity extends Activity {&#xD;&#xA;      private static final String EXTRA_FILENAME=&#xD;&#xA;        """"com.commonsware.android.camcon.EXTRA_FILENAME"""";&#xD;&#xA;      private static final String FILENAME=""""CameraContentDemo.jpeg"""";&#xD;&#xA;      private static final int CONTENT_REQUEST=1337;&#xD;&#xA;      private File output=null;&#xD;&#xA;    &#xD;&#xA;      @Override&#xD;&#xA;      public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;        super.onCreate(savedInstanceState);&#xD;&#xA;    &#xD;&#xA;        Intent i=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);&#xD;&#xA;    &#xD;&#xA;        if (savedInstanceState==null) {&#xD;&#xA;          File dir=&#xD;&#xA;            Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);&#xD;&#xA;    &#xD;&#xA;          dir.mkdirs();&#xD;&#xA;          output=new File(dir, FILENAME);&#xD;&#xA;        }&#xD;&#xA;        else {&#xD;&#xA;          output=(File)savedInstanceState.getSerializable(EXTRA_FILENAME);&#xD;&#xA;        }&#xD;&#xA;    &#xD;&#xA;        if (output.exists()) {&#xD;&#xA;          output.delete();&#xD;&#xA;        }&#xD;&#xA;    &#xD;&#xA;        i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(output));&#xD;&#xA;    &#xD;&#xA;        startActivityForResult(i, CONTENT_REQUEST);&#xD;&#xA;      }&#xD;&#xA;    &#xD;&#xA;      @Override&#xD;&#xA;      protected void onSaveInstanceState(Bundle outState) {&#xD;&#xA;        super.onSaveInstanceState(outState);&#xD;&#xA;    &#xD;&#xA;        outState.putSerializable(EXTRA_FILENAME, output);&#xD;&#xA;      }&#xD;&#xA;    &#xD;&#xA;      @Override&#xD;&#xA;      protected void onActivityResult(int requestCode, int resultCode,&#xD;&#xA;                                      Intent data) {&#xD;&#xA;        if (requestCode == CONTENT_REQUEST) {&#xD;&#xA;          if (resultCode == RESULT_OK) {&#xD;&#xA;            Intent i=new Intent(Intent.ACTION_VIEW);&#xD;&#xA;            &#xD;&#xA;            i.setDataAndType(Uri.fromFile(output), """"image/jpeg"""");&#xD;&#xA;            startActivity(i);&#xD;&#xA;            finish();&#xD;&#xA;          }&#xD;&#xA;        }&#xD;&#xA;      }&#xD;&#xA;    }"

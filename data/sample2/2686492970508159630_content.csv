"Content"
"    <%@ WebHandler Language=""""C#"""" Class=""""DisplayImg"""" %>&#xD;&#xA;    &#xD;&#xA;    using System;&#xD;&#xA;    using System.Web;&#xD;&#xA;    using System.Configuration;&#xD;&#xA;    using System.IO;&#xD;&#xA;    using System.Data;&#xD;&#xA;    using System.Data.SqlClient;&#xD;&#xA;    &#xD;&#xA;    public class DisplayImg : IHttpHandler&#xD;&#xA;    {&#xD;&#xA;    &#xD;&#xA;        public void ProcessRequest(HttpContext context)&#xD;&#xA;        {&#xD;&#xA;            string theID;&#xD;&#xA;            if (context.Request.QueryString[""""id""""] != null)&#xD;&#xA;                theID = context.Request.QueryString[""""id""""].ToString();&#xD;&#xA;            else&#xD;&#xA;                throw new ArgumentException(""""No parameter specified"""");&#xD;&#xA;    &#xD;&#xA;            context.Response.ContentType = """"image/jpeg"""";&#xD;&#xA;            Stream strm = DisplayImage(theID);&#xD;&#xA;            byte[] buffer = new byte[2048];&#xD;&#xA;            int byteSeq = strm.Read(buffer, 0, 2048);&#xD;&#xA;    &#xD;&#xA;            while (byteSeq > 0)&#xD;&#xA;            {&#xD;&#xA;                context.Response.OutputStream.Write(buffer, 0, byteSeq);&#xD;&#xA;                byteSeq = strm.Read(buffer, 0, 2048);&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    &#xD;&#xA;        public Stream DisplayImage(string theID)&#xD;&#xA;        {&#xD;&#xA;            SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings[""""SERVER""""].ConnectionString.ToString());&#xD;&#xA;            string sql = """"SELECT Server_image_icon FROM tbl_ServerMaster WHERE server_Code = @ID"""";&#xD;&#xA;            SqlCommand cmd = new SqlCommand(sql, connection);&#xD;&#xA;            cmd.CommandType = CommandType.Text;&#xD;&#xA;            cmd.Parameters.AddWithValue(""""@ID"""", theID);&#xD;&#xA;            connection.Open();&#xD;&#xA;            object theImg = cmd.ExecuteScalar();&#xD;&#xA;            try&#xD;&#xA;            {&#xD;&#xA;                return new MemoryStream((byte[])theImg);&#xD;&#xA;            }&#xD;&#xA;            catch&#xD;&#xA;            {&#xD;&#xA;                return null;&#xD;&#xA;            }&#xD;&#xA;            finally&#xD;&#xA;            {&#xD;&#xA;                connection.Close();&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    &#xD;&#xA;        public bool IsReusable&#xD;&#xA;        {&#xD;&#xA;            get&#xD;&#xA;            {&#xD;&#xA;                return false;&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    }"

"Content"
"    using System;&#xD;&#xA;    using System.Collections.Generic;&#xD;&#xA;    using System.Text;&#xD;&#xA;    using System.Xml.Serialization;&#xD;&#xA;    &#xD;&#xA;    [XmlRoot(""""dictionary"""")]&#xD;&#xA;    public class SerializableDictionary<TKey, TValue>&#xD;&#xA;        : Dictionary<TKey, TValue>, IXmlSerializable&#xD;&#xA;    {&#xD;&#xA;        #region IXmlSerializable Members&#xD;&#xA;        public System.Xml.Schema.XmlSchema GetSchema()&#xD;&#xA;        {&#xD;&#xA;            return null;&#xD;&#xA;        }&#xD;&#xA;    &#xD;&#xA;        public void ReadXml(System.Xml.XmlReader reader)&#xD;&#xA;        {&#xD;&#xA;            XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));&#xD;&#xA;            XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));&#xD;&#xA;    &#xD;&#xA;            bool wasEmpty = reader.IsEmptyElement;&#xD;&#xA;            reader.Read();&#xD;&#xA;    &#xD;&#xA;            if (wasEmpty)&#xD;&#xA;                return;&#xD;&#xA;    &#xD;&#xA;            while (reader.NodeType != System.Xml.XmlNodeType.EndElement)&#xD;&#xA;            {&#xD;&#xA;                reader.ReadStartElement(""""item"""");&#xD;&#xA;    &#xD;&#xA;                reader.ReadStartElement(""""key"""");&#xD;&#xA;                TKey key = (TKey)keySerializer.Deserialize(reader);&#xD;&#xA;                reader.ReadEndElement();&#xD;&#xA;    &#xD;&#xA;                reader.ReadStartElement(""""value"""");&#xD;&#xA;                TValue value = (TValue)valueSerializer.Deserialize(reader);&#xD;&#xA;                reader.ReadEndElement();&#xD;&#xA;    &#xD;&#xA;                this.Add(key, value);&#xD;&#xA;    &#xD;&#xA;                reader.ReadEndElement();&#xD;&#xA;                reader.MoveToContent();&#xD;&#xA;            }&#xD;&#xA;            reader.ReadEndElement();&#xD;&#xA;        }&#xD;&#xA;    &#xD;&#xA;        public void WriteXml(System.Xml.XmlWriter writer)&#xD;&#xA;        {&#xD;&#xA;            XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));&#xD;&#xA;            XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));&#xD;&#xA;    &#xD;&#xA;            foreach (TKey key in this.Keys)&#xD;&#xA;            {&#xD;&#xA;                writer.WriteStartElement(""""item"""");&#xD;&#xA;    &#xD;&#xA;                writer.WriteStartElement(""""key"""");&#xD;&#xA;                keySerializer.Serialize(writer, key);&#xD;&#xA;                writer.WriteEndElement();&#xD;&#xA;    &#xD;&#xA;                writer.WriteStartElement(""""value"""");&#xD;&#xA;                TValue value = this[key];&#xD;&#xA;                valueSerializer.Serialize(writer, value);&#xD;&#xA;                writer.WriteEndElement();&#xD;&#xA;    &#xD;&#xA;                writer.WriteEndElement();&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;        #endregion&#xD;&#xA;    }"

"Content"
"	import android.util.Log;&#xD;&#xA;	import org.json.JSONException;&#xD;&#xA;	import org.json.JSONObject;&#xD;&#xA;	import java.io.BufferedInputStream;&#xD;&#xA;	import java.io.BufferedReader;&#xD;&#xA;	import java.io.DataOutputStream;&#xD;&#xA;	import java.io.IOException;&#xD;&#xA;	import java.io.InputStream;&#xD;&#xA;	import java.io.InputStreamReader;&#xD;&#xA;	import java.io.UnsupportedEncodingException;&#xD;&#xA;	import java.net.HttpURLConnection;&#xD;&#xA;	import java.net.URL;&#xD;&#xA;	import java.net.URLEncoder;&#xD;&#xA;	import java.util.HashMap;&#xD;&#xA;    public class JSONParser {&#xD;&#xA;		String charset = """"UTF-8"""";&#xD;&#xA;		HttpURLConnection conn;&#xD;&#xA;		DataOutputStream wr;&#xD;&#xA;		StringBuilder result;&#xD;&#xA;		URL urlObj;&#xD;&#xA;		JSONObject jObj = null;&#xD;&#xA;		StringBuilder sbParams;&#xD;&#xA;		String paramsString;&#xD;&#xA;		public JSONObject makeHttpRequest(String url, String method,&#xD;&#xA;										  HashMap<String, String> params) {&#xD;&#xA;			sbParams = new StringBuilder();&#xD;&#xA;			int i = 0;&#xD;&#xA;			for (String key : params.keySet()) {&#xD;&#xA;				try {&#xD;&#xA;					if (i != 0){&#xD;&#xA;						sbParams.append(""""&"""");&#xD;&#xA;					}&#xD;&#xA;					sbParams.append(key).append(""""="""")&#xD;&#xA;							.append(URLEncoder.encode(params.get(key), charset));&#xD;&#xA;				} catch (UnsupportedEncodingException e) {&#xD;&#xA;					e.printStackTrace();&#xD;&#xA;				}&#xD;&#xA;				i++;&#xD;&#xA;			}&#xD;&#xA;			if (method.equals(""""POST"""")) {&#xD;&#xA;				// request method is POST&#xD;&#xA;				try {&#xD;&#xA;					urlObj = new URL(url);&#xD;&#xA;					conn = (HttpURLConnection) urlObj.openConnection();&#xD;&#xA;					conn.setDoOutput(true);&#xD;&#xA;					conn.setRequestMethod(""""POST"""");&#xD;&#xA;					conn.setRequestProperty(""""Accept-Charset"""", charset);&#xD;&#xA;					conn.setReadTimeout(10000);&#xD;&#xA;					conn.setConnectTimeout(15000);&#xD;&#xA;					conn.connect();&#xD;&#xA;					paramsString = sbParams.toString();&#xD;&#xA;					wr = new DataOutputStream(conn.getOutputStream());&#xD;&#xA;					wr.writeBytes(paramsString);&#xD;&#xA;					wr.flush();&#xD;&#xA;					wr.close();&#xD;&#xA;				} catch (IOException e) {&#xD;&#xA;					e.printStackTrace();&#xD;&#xA;				}&#xD;&#xA;			}&#xD;&#xA;			else if(method.equals(""""GET"""")){&#xD;&#xA;				// request method is GET&#xD;&#xA;				if (sbParams.length() != 0) {&#xD;&#xA;					url += """"?"""" + sbParams.toString();&#xD;&#xA;				}&#xD;&#xA;				try {&#xD;&#xA;					urlObj = new URL(url);&#xD;&#xA;					conn = (HttpURLConnection) urlObj.openConnection();&#xD;&#xA;					conn.setDoOutput(false);&#xD;&#xA;					conn.setRequestMethod(""""GET"""");&#xD;&#xA;					conn.setRequestProperty(""""Accept-Charset"""", charset);&#xD;&#xA;					conn.setConnectTimeout(15000);&#xD;&#xA;					conn.connect();&#xD;&#xA;				} catch (IOException e) {&#xD;&#xA;					e.printStackTrace();&#xD;&#xA;				}&#xD;&#xA;			}&#xD;&#xA;			try {&#xD;&#xA;				//Receive the response from the server&#xD;&#xA;				InputStream in = new BufferedInputStream(conn.getInputStream());&#xD;&#xA;				BufferedReader reader = new BufferedReader(new InputStreamReader(in));&#xD;&#xA;				result = new StringBuilder();&#xD;&#xA;				String line;&#xD;&#xA;				while ((line = reader.readLine()) != null) {&#xD;&#xA;					result.append(line);&#xD;&#xA;				}&#xD;&#xA;				Log.d(""""JSON Parser"""", """"result: """" + result.toString());&#xD;&#xA;			} catch (IOException e) {&#xD;&#xA;				e.printStackTrace();&#xD;&#xA;			}&#xD;&#xA;			conn.disconnect();&#xD;&#xA;			// try parse the string to a JSON object&#xD;&#xA;			try {&#xD;&#xA;				jObj = new JSONObject(result.toString());&#xD;&#xA;			} catch (JSONException e) {&#xD;&#xA;				Log.e(""""JSON Parser"""", """"Error parsing data """" + e.toString());&#xD;&#xA;			}&#xD;&#xA;			// return JSON Object&#xD;&#xA;			return jObj;&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;	"

"Content"
"    function query() {&#xD;&#xA;	global $link;&#xD;&#xA;	$debug = false;&#xD;&#xA;	&#xD;&#xA;	//get the sql query&#xD;&#xA;	$args = func_get_args();&#xD;&#xA;	$sql = array_shift($args);&#xD;&#xA;	//secure the input&#xD;&#xA;	for ($i=0;$i<count($args);$i++) {&#xD;&#xA;		$args[$i] = urldecode($args[$i]);&#xD;&#xA;		$args[$i] = mysqli_real_escape_string($link, $args[$i]);&#xD;&#xA;	}&#xD;&#xA;	&#xD;&#xA;	//build the final query&#xD;&#xA;	$sql = vsprintf($sql, $args);&#xD;&#xA;	&#xD;&#xA;	if ($debug) print $sql;&#xD;&#xA;	&#xD;&#xA;	//execute and fetch the results&#xD;&#xA;	$result = mysqli_query($link, $sql);&#xD;&#xA;	if (mysqli_errno($link)==0 && $result) {&#xD;&#xA;		&#xD;&#xA;		$rows = array();&#xD;&#xA;		if ($result!==true)&#xD;&#xA;		while ($d = mysqli_fetch_assoc($result)) {&#xD;&#xA;			array_push($rows,$d);&#xD;&#xA;		}&#xD;&#xA;		&#xD;&#xA;		//return json&#xD;&#xA;		return array('result'=>$rows);&#xD;&#xA;		&#xD;&#xA;	} else {&#xD;&#xA;	&#xD;&#xA;		//error&#xD;&#xA;		return array('error'=>'Database error');&#xD;&#xA;	}&#xD;&#xA;        }"

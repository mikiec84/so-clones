"Content"
"    private Bitmap getBitmap(String path) {&#xD;&#xA;        &#xD;&#xA;        Uri uri = getImageUri(path);&#xD;&#xA;        InputStream in = null;&#xD;&#xA;        try {&#xD;&#xA;            final int IMAGE_MAX_SIZE = 1200000; // 1.2MP&#xD;&#xA;            in = mContentResolver.openInputStream(uri);&#xD;&#xA;        &#xD;&#xA;            // Decode image size&#xD;&#xA;            BitmapFactory.Options o = new BitmapFactory.Options();&#xD;&#xA;            o.inJustDecodeBounds = true;&#xD;&#xA;            BitmapFactory.decodeStream(in, null, o);&#xD;&#xA;            in.close();&#xD;&#xA;        &#xD;&#xA;        &#xD;&#xA;        &#xD;&#xA;            int scale = 1;&#xD;&#xA;            while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > &#xD;&#xA;                  IMAGE_MAX_SIZE) {&#xD;&#xA;               scale++;&#xD;&#xA;            }&#xD;&#xA;            Log.d(TAG, """"scale = """" + scale + """", orig-width: """" + o.outWidth + """", &#xD;&#xA;               orig-height: """" + o.outHeight);&#xD;&#xA;        &#xD;&#xA;            Bitmap b = null;&#xD;&#xA;            in = mContentResolver.openInputStream(uri);&#xD;&#xA;            if (scale > 1) {&#xD;&#xA;                scale--;&#xD;&#xA;                // scale to max possible inSampleSize that still yields an image&#xD;&#xA;                // larger than target&#xD;&#xA;                o = new BitmapFactory.Options();&#xD;&#xA;                o.inSampleSize = scale;&#xD;&#xA;                b = BitmapFactory.decodeStream(in, null, o);&#xD;&#xA;        &#xD;&#xA;                // resize to desired dimensions&#xD;&#xA;                int height = b.getHeight();&#xD;&#xA;                int width = b.getWidth();&#xD;&#xA;                Log.d(TAG, """"1th scale operation dimenions - width: """" + width + """",&#xD;&#xA;                   height: """" + height);&#xD;&#xA;        &#xD;&#xA;                double y = Math.sqrt(IMAGE_MAX_SIZE&#xD;&#xA;                        / (((double) width) / height));&#xD;&#xA;                double x = (y / height) * width;&#xD;&#xA;        &#xD;&#xA;                Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x, &#xD;&#xA;                   (int) y, true);&#xD;&#xA;                b.recycle();&#xD;&#xA;                b = scaledBitmap;&#xD;&#xA;        &#xD;&#xA;                System.gc();&#xD;&#xA;            } else {&#xD;&#xA;                b = BitmapFactory.decodeStream(in);&#xD;&#xA;            }&#xD;&#xA;            in.close();&#xD;&#xA;        &#xD;&#xA;            Log.d(TAG, """"bitmap size - width: """" +b.getWidth() + """", height: """" + &#xD;&#xA;               b.getHeight());&#xD;&#xA;            return b;&#xD;&#xA;        } catch (IOException e) {&#xD;&#xA;            Log.e(TAG, e.getMessage(),e);&#xD;&#xA;            return null;&#xD;&#xA;        }"

"Content"
"    function fix_flash() {&#xD;&#xA;        // loop through every embed tag on the site&#xD;&#xA;        var embeds = document.getElementsByTagName('embed');&#xD;&#xA;        for (i = 0; i < embeds.length; i++) {&#xD;&#xA;            embed = embeds[i];&#xD;&#xA;            var new_embed;&#xD;&#xA;            // everything but Firefox & Konqueror&#xD;&#xA;            if (embed.outerHTML) {&#xD;&#xA;                var html = embed.outerHTML;&#xD;&#xA;                // replace an existing wmode parameter&#xD;&#xA;                if (html.match(/wmode\s*=\s*('|"""")[a-zA-Z]+('|"""")/i))&#xD;&#xA;                    new_embed = html.replace(/wmode\s*=\s*('|"""")window('|"""")/i, """"wmode='transparent'"""");&#xD;&#xA;                // add a new wmode parameter&#xD;&#xA;                else&#xD;&#xA;                    new_embed = html.replace(/<embed\s/i, """"<embed wmode='transparent' """");&#xD;&#xA;                // replace the old embed object with the fixed version&#xD;&#xA;                embed.insertAdjacentHTML('beforeBegin', new_embed);&#xD;&#xA;                embed.parentNode.removeChild(embed);&#xD;&#xA;            } else {&#xD;&#xA;                // cloneNode is buggy in some versions of Safari & Opera, but works fine in FF&#xD;&#xA;                new_embed = embed.cloneNode(true);&#xD;&#xA;                if (!new_embed.getAttribute('wmode') || new_embed.getAttribute('wmode').toLowerCase() == 'window')&#xD;&#xA;                    new_embed.setAttribute('wmode', 'transparent');&#xD;&#xA;                embed.parentNode.replaceChild(new_embed, embed);&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;        // loop through every object tag on the site&#xD;&#xA;        var objects = document.getElementsByTagName('object');&#xD;&#xA;        for (i = 0; i < objects.length; i++) {&#xD;&#xA;            object = objects[i];&#xD;&#xA;            var new_object;&#xD;&#xA;            // object is an IE specific tag so we can use outerHTML here&#xD;&#xA;            if (object.outerHTML) {&#xD;&#xA;                var html = object.outerHTML;&#xD;&#xA;                // replace an existing wmode parameter&#xD;&#xA;                if (html.match(/<param\s+name\s*=\s*('|"""")wmode('|"""")\s+value\s*=\s*('|"""")[a-zA-Z]+('|"""")\s*\/?\>/i))&#xD;&#xA;                    new_object = html.replace(/<param\s+name\s*=\s*('|"""")wmode('|"""")\s+value\s*=\s*('|"""")window('|"""")\s*\/?\>/i, """"<param name='wmode' value='transparent' />"""");&#xD;&#xA;                // add a new wmode parameter&#xD;&#xA;                else&#xD;&#xA;                    new_object = html.replace(/<\/object\>/i, """"<param name='wmode' value='transparent' />\n</object>"""");&#xD;&#xA;                // loop through each of the param tags&#xD;&#xA;                var children = object.childNodes;&#xD;&#xA;                for (j = 0; j < children.length; j++) {&#xD;&#xA;                    try {&#xD;&#xA;                        if (children[j] != null) {&#xD;&#xA;                            var theName = children[j].getAttribute('name');&#xD;&#xA;                            if (theName != null && theName.match(/flashvars/i)) {&#xD;&#xA;                                new_object = new_object.replace(/<param\s+name\s*=\s*('|"""")flashvars('|"""")\s+value\s*=\s*('|"""")[^'""""]*('|"""")\s*\/?\>/i, """"<param name='flashvars' value='"""" + children[j].getAttribute('value') + """"' />"""");&#xD;&#xA;                            }&#xD;&#xA;                        }&#xD;&#xA;                    }&#xD;&#xA;                    catch (err) {&#xD;&#xA;                    }&#xD;&#xA;                }&#xD;&#xA;                // replace the old embed object with the fixed versiony&#xD;&#xA;                object.insertAdjacentHTML('beforeBegin', new_object);&#xD;&#xA;                object.parentNode.removeChild(object);&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    }"
